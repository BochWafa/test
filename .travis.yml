language: java
jdk:
  - oraclejdk8
services:
  - docker
env:
  global:
    - secure: "SiA2szdJDldFcB4GXNprW9uu130myN8cAYo2ER1jbwwH7yy99o91n9q7wicdpMNHZYoi1YsrWiWdeippn9rRv4c2une++S8115LhyD1kI6/jNh8LhaUJwRk2Dk0XOAlsSbFH9rVbPEY3v5IJaq9t5HulQ1gbjF7L7vtLTi4dLjEdij5NBmQtf83wADyJ/wajKAazsBKBQSCYH+Qsueo1QcqalPwwfQvWU+FpUktLbV3DiAHuZ0H4HVgiAQtm5wdhNchBpl12d4MCvG4+hqLa8kGz2tu6BGwF0L8nXyEGxIfAq7fN0XDvRuGsa5KByiWAOhFIH99qlc23ion+OHRvKYpCsQA4JgrunljFtnVWSwDsA0MesNPxZO75cU7I7XmoYe8dvtzfAW0dtMTl+TAA9FSSoeCB8xtB8CePuas1kQu6j1aM4HF49XbzFu4Qom+VErAXMVxYLe1+qEyiLo20KTm7aeNK17leMD68OK+LXBNMlMowfLgIH5H5ctmDiMhjj0wRjmzx67cInf8QQf95/KiKWh6UfK2hiYFOdpy+jzCAuKb53t339QcHIaS8A9RQ+1ccwA1gn46Wpru+4Sja4hSLKORLRABtf1yXD0qaHjpzTkW+3vkWQU77AsSSU447iiFwXIS5IK6dg36MBbUxtEbdl+CZetMqbCtzeCpdBdQ="
    - secure: "LL7eH46is6uQxwUbYY9VwVEc3HmPsR1BC0gRPMj7eck699Vf22aP6fEd8GGv6hLTAQIjJSrC9SZnDHaDmE3Se4VKeAuVmfWh1OdNuKdWrSHzkvXZ9/su1Pglis9HFEsdsThdqGg5tw304FDChd+nlzjBZLposgWi8G2VlujKGd1EHX9SlRihOFUSikvx7ErapW2uSnDvYe4FenrijaFLfBmj7Xojxuwe82RaJFtIMSQf6vVO4N3OAsMNcl/rhEB4szutpqTVW0wRfrhCGjpu/BJLZISG7w7w5A1oChLjrCzlABkhjZUQE8FzPlZXztX+Hf/q8PdLcOUKAT06p8chMZBUq5jRc8AG5IGmRk0cKpGs/jPTclQ+AbSvRVdkLbB3/kCmVPBuJI08uDKYK93QDvAT4pwM/hNwxynMCjBmmx8uzhczlFP1UcsXsAZ/KFyb65bvYgnTbgTtl15n1Y0HKs2uSFCNLed+P20zizbRXAx0AVjcBQPyzGiN+ur2OhVvA0vsCTq7HtM23oCJOG2MKRq8JaDNKnemcxiA5MavDO9Otr+AEhiW9N6IeKKBg9cDXSA85IXUizUMlndmtPmDbBblVc76YpeS/ifaB6sYBFBZPgi/1CPiyzY/rpBirixCl4lcNAVDmcv1zOi9Bd6hrmgiqmtpZNfO+18p5Fe0wj0="
    - secure: "r1FmHx69xI7O4KBdJ72eGQvPr3KoO8VebEyTQ7WI0cxCBNQZt2pz05hcljvUXaU8LwALn7T2H+vzB/N34fg3qbEyDPeFWvAnli4eUMTqu4Ham/ppQSKFQNP653UehasCM9xW1Tas5EYV3X1327G2rKlfCJLdePcmxcAmm+dsJOj2MRtzsReT82f6dlwZidKE0EPESZk7Ghh31h7YByIfeLmCCaM3Hkjb2UJm1lN21AwMlUB4d4p0Xhse71n3oOEZeFIvg5WTN4bL9ll5nU/YVx94iQbEX+GEy9rQjhp5nTe5bJ5lKNFNZEVw3pBqnzaZkrJfdk2mOmUw4Y2VJ0c0BfD9/D/UF4xd5AdK02kO0zlODyKK9Ry6pbYlPRmhBQa70u2BwcEqEp6cLH/HBKq313a5kdCDuo1IPfP3ocvxn1sIRs5fS/QutZFT3EowI9S5t8xxw6lZ2ZcTtDDkjM3Kh44jqf4Rm6FBu7hERncxelqzmjIZg5zuCke4F+oWV26i5sXthhCs/HOqADcFU5K6wsatX0MIWu6jZlbK8OMGJNTKxmmw07XArNB7AQLAXmeLiBzU2A8Zv30/uKpCwGxvJjCmM0fmI8xcMdNpJ69mnfCdk2eelRGLCVh5BCHRjHV54m9JPeSEGdsZDqoI/d9zxMWTkeYHgpdzAOOt9Wtdxuo="
    - COMMIT=${TRAVIS_COMMIT::7}
script:
  - ./mvnw clean install -B
before_install:
  - chmod +x mvnw
after_success:
  - docker login -u $DOCKER_USER -p $DOCKER_PASS
  - export TAG=`if [ "$TRAVIS_BRANCH" == "master" ]; then echo "latest"; else echo $TRAVIS_BRANCH&amp;amp;amp;amp;amp;amp;amp;lt;span data-mce-type="bookmark" style="display: inline-block; width: 0px; overflow: hidden; line-height: 0;" class="mce_SELRES_start"&amp;amp;amp;amp;amp;amp;amp;gt;&amp;amp;amp;amp;amp;amp;amp;lt;/span&amp;amp;amp;amp;amp;amp;amp;gt;; fi`
  - export IMAGE_NAME=bochwafay/backendppp
  - docker build -t $IMAGE_NAME:$COMMIT .
  - docker tag $IMAGE_NAME:$COMMIT $IMAGE_NAME:$TAG
  - docker push $IMAGE_NAME
deploy:
  provider: heroku
  api-key: $HEROKU_API_KEY
  app: backendppp
  edge:
    branch: master
  
